var DEBUG=true;const gather_data_fail=0;var DataModel=function(){this.ajaxUrl=null;this.headers=null;this.type="POST";this.dataType="json";this.postData=null;this.emptyCheckBoxVal="OFF";this.form=null;this.errorArrayName="";this.setRootForm=function(a){if(typeof a=="string"&&$(a).length>0||$(a).length>0){this.form=$(a);return true}return false};this.gatherData=function(a){if(this.setRootForm(a)){data=new Array;data[0]=$(this.form).find("input[type!=radio]");data[1]=$(this.form).find("textarea");data[2]=$(this.form).find("select");data[3]=$(this.form).find("input[type=radio]:checked");var c={};var d=this.emptyCheckBoxVal;var e=null;var f=0;$.each(data,function(a,g){if(g[0]!=undefined){if(c==null)c={};$.each(g,function(a,g){var h=null;if($(g).attr("name"))if($(g).attr("name").indexOf("[",0)!=-1){if($(g).attr("type")=="checkbox"&&d=="")return true;attr=$(g).attr("name");if(/\[\]/g.test(attr)){h=f;f++}attr=attr.split("[");group=attr[0];if(attr.length>2){if(h===null)h=attr[attr.length-1].replace("]","");attr=attr.slice(1,attr.length);var i={};$.each(attr.reverse(),function(a,c){c=c.replace("]","");attr[a]=c;if(a==0){if($(g).attr("type")=="checkbox"){if($(g).attr("checked")==true||$(g).attr("checked")=="checked"){i[h]=$(g).val()}else{i[h]=$(g).val()}}else{i[h]=$(g).val()}}else{b=i;i={};i[c]=b}});if(e==null){e=i}else{e=e.merge(i)}}else{h=attr[1].replace("]","");if(c[group]==undefined)c[group]={};if($(g).attr("type")=="checkbox"){if($(g).attr("checked")==true||$(g).attr("checked")=="checked"){if(c[group][h]==undefined)c[group][h]={};c[group][h][a]=$(g).val()}else if(d!=""){if(c[group][h]==undefined)c[group][h]={};c[group][h][a]=d}}else c[group][h]=$(g).val()}}else if($(g).attr("type")=="checkbox"){if($(g).attr("checked")==true||$(g).attr("checked")=="checked"){if(c[$(g).attr("name")]==undefined)c[$(g).attr("name")]={};c[$(g).attr("name")]=$(g).val()}else if(d!=""){if(c[$(g).attr("name")]==undefined)c[$(g).attr("name")]={};c[$(g).attr("name")]=d}}else c[$(g).attr("name")]=$(g).val()})}});c=jQuery.extend(c,e);if(c==null)this.postData=gather_data_fail;else{this.postData=c}}else if(DEBUG==true){console.log("WARNING: object passed to gatherData doesn't exist")}return c};this.mergeDataWithObject=function(a){this.postData=jQuery.extend(this.postData,a)};this.post=function(a){if(this.ajaxUrl==null||this.ajaxUrl==""){this.ajaxUrl=this.form.attr("action")}var b=this.errorArrayName;if(this.ajaxUrl!=null&&this.ajaxUrl!=""&&this.postData!=null){$.ajax({url:this.ajaxUrl,type:this.type,data:this.postData,dataType:this.dataType,headers:this.headers,success:function(b){if(a)a(b)},error:function(a){if(DEBUG==true){console.log("WARNING: ajaxUrl or response is invalid")}}})}else if(DEBUG==true){response="";if(this.ajaxUrl==null||this.ajaxUrl=="")response+="ajaxUrl is not defined";if(this.postData==gather_data_fail)response+="postData is empty after atempt to gather data";console.log("WARNING: "+response);return false}}};Object.defineProperty(Object.prototype,"merge",{enumerable:false,value:function(){var a=true,b=this,c=arguments.length,d,e,f,g;if(typeof arguments[arguments.length-1]==="boolean"){a=arguments[arguments.length-1];c=arguments.length-1}for(f=0;f<c;f++){g=arguments[f];if(g!=null){Object.getOwnPropertyNames(g).forEach(function(c){var d;if((typeof b[c]==="object"||typeof b[c]==="undefined")&&typeof g[c]==="object"){if(typeof b[c]==="undefined"){b[c]=Array.isArray(g[c])?[]:{}}b[c].merge(g[c],a)}else if(c in b&&a||!(c in b)){d=Object.getOwnPropertyDescriptor(g,c);if(d.configurable){Object.defineProperty(b,c,d)}}})}}return this}})